
# Демонстрация безопасной передачи токена

Этот проект представляет собой демонстрацию надежной защиты чувствительной информации (токена) при передаче по незащищенному каналу. Решение обеспечивает защиту от компрометации (прослушивания) и подмены, в том числе со стороны самих участников обмена.

## Основные цели

- **Конфиденциальность:** Только авторизованный получатель может прочитать содержимое токена.
- **Целостность:** Любое изменение токена в процессе передачи будет обнаружено.
- **Аутентичность:** Получатель может быть уверен, что токен был отправлен именно заявленным отправителем.
- **Неопровержимость (Non-repudiation):** Отправитель не сможет отказаться от факта отправки сообщения, так как для его создания использовался его уникальный приватный ключ.

## Используемые криптографические подходы

Проект реализует **гибридную схему шифрования**, сочетающую асимметричную и симметричную криптографию.

1.  **Цифровая подпись (`SHA256withRSA`)**
    -   Отправитель хеширует токен и подписывает хэш своим **приватным ключом RSA**.
    -   Это гарантирует **целостность** и **аутентичность** данных.

2.  **Гибридное шифрование (`AES` + `RSA`)**
    -   Асимметричное шифрование (`RSA`) имеет строгие ограничения на размер шифруемых данных, поэтому оно не подходит для шифрования всего пакета (токен + подпись).
    -   Вместо этого генерируется случайный **сессионный ключ `AES`**.
    -   Подписанный токен шифруется этим быстрым ключом `AES`.
    -   Сам ключ `AES` шифруется **публичным ключом RSA** получателя.
    -   Получателю отправляется пакет, содержащий зашифрованный ключ `AES` и зашифрованные данные. Это обеспечивает **конфиденциальность**.

## Структура проекта

Проект использует стандартную структуру Maven для легкой сборки и управления.

```
secure-token-demo/
├── pom.xml
└── src/
    └── main/
        └── java/
            └── com/example/securetoken/
                ├── SecurePayload.java
                ├── SecureTokenTransmitter.java
                └── SignedToken.java
```

## Предварительные требования

Для сборки и запуска проекта вам понадобятся:
- **JDK 11** или выше
- **Apache Maven**

## Как запустить

### Способ 1: Через IDE (например, IntelliJ IDEA)

1.  Склонируйте репозиторий: `git clone <URL_репозитория>`
2.  Откройте проект в вашей IDE как Maven-проект.
3.  Найдите файл `src/main/java/com/example/securetoken/SecureTokenTransmitter.java`.
4.  Нажмите на зеленую кнопку "play" рядом с методом `main` и запустите его.

### Способ 2: Через командную строку

1.  Склонируйте репозиторий и перейдите в корневую папку проекта.
    ```bash
    git clone <URL_репозитория>
    cd secure-token-demo
    ```
2.  Соберите проект с помощью Maven.
    ```bash
    mvn clean install
    ```
3.  Запустите скомпилированное приложение.

    **Для Linux/macOS:**
    ```bash
    java -cp target/secure-token-demo-1.0-SNAPSHOT.jar com.example.securetoken.SecureTokenTransmitter
    ```

    **Для Windows:**
    ```bash
    java -cp target\secure-token-demo-1.0-SNAPSHOT.jar com.example.securetoken.SecureTokenTransmitter
    ```

## Ожидаемый результат

В консоли вы должны увидеть результат работы двух сценариев: успешной передачи и попытки подмены данных.

```plaintext
Исходный токен: user_id:12345;roles:admin,editor;exp:1678886400

--- Сценарий 1: Успешная передача ---
Зашифрованный пакет готов к отправке (длина: 881 байт).
Пакет успешно получен и проверен. Расшифрованный токен: user_id:12345;roles:admin,editor;exp:1678886400
Статус: УСПЕХ

--- Сценарий 2: Попытка подмены данных ---
Злоумышленник изменил байт в зашифрованном пакете.
Боб не смог обработать пакет. Ошибка: SecurityException - Signature verification failed! The token is compromised or forged.
Статус: ПРОВАЛ (как и ожидалось)
```

